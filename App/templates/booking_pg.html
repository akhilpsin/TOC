{% load staticfiles %}
{% static "" as img %}

<!doctype html>
<html lang="en">
  <head>
    <title>Colorlib Medi+</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300, 400, 700" rel="stylesheet">

    <link rel="stylesheet" href="{% static 'home/css/bootstrap.css' %}">
    <link rel="stylesheet" href="{% static 'home/css/animate.css' %}">
    <link rel="stylesheet" href="{% static 'home/css/owl.carousel.min.css' %}">
    <link rel="stylesheet" href="{% static 'home/css/bootstrap-datepicker.css' %}">
    <link rel="stylesheet" href="{% static 'home/css/jquery.timepicker.css' %}">

    <link rel="stylesheet" href="{% static 'home/fonts/ionicons/css/ionicons.min.css' %}">
    <link rel="stylesheet" href="{% static 'home/fonts/fontawesome/css/font-awesome.min.css' %}">
    <link rel="stylesheet" href="{% static 'home/fonts/flaticon/font/flaticon.css' %}">


    <!-- Theme Style -->
    <link rel="stylesheet" href="{% static 'home/css/style.css' %}">
	<!-- Meta tag Keywords -->

	<!-- css files -->
	<link rel="stylesheet" href="{% static 'home/css2/style.css' %}" type="text/css" media="all" />
	<!-- Style-CSS -->
	<link href="{% static 'home/css2/font-awesome.min.css' %}" rel="stylesheet">
	<!-- Font-Awesome-Icons-CSS -->
	<!-- //css files -->

	<!-- web-fonts -->
	<link href="//fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i&amp;subset=cyrillic,cyrillic-ext,greek,greek-ext"
	 rel="stylesheet">
	<!-- //web-fonts -->
<!-- 	<script>
		addEventListener("load", function () {
			setTimeout(hideURLbar, 0);
		}, false);

		function hideURLbar() {
			window.scrollTo(0, 1);
		}
	</script> -->
<script>
function Validate() {
if ($(('#sel_loc')).val() == null){
    alert('Please select location')
	$( '#sel_loc' ).focus();
            return false;
        }
if ($(('#sel_hosp')).val() == null) {
    alert('Please select Hospital')
	$( '#sel_hosp' ).focus();
            return false;
        }
if ($(('#spl')).val() == null){
    alert('Please select Department')
	$( '#spl' ).focus();
            return false;
        }
if ($(('#dr')).val() == null) {
    alert('Please select your Doctor')
	$( '#dr' ).focus();
            return false;
        }
if ($(('#appointment_tyme')).val() == null) {
    alert('Please select your appoinment time')
	$( '#appointment_tyme' ).focus();
            return false;
        }
    }
</script>
  </head>
  <body style="text-align: center; background-image: url('{% static 'home/img/drpat.jpg' %}');background-repeat: repeat-y;">
    
    <header role="banner">
      <div class="top-bar">
        <div class="container">
          <div class="row">
            <div class="col-md-6 col-sm-6 col-5">
              <ul class="social list-unstyled">
          <!--       <li><a href="#"><span class="fa fa-facebook"></span></a></li>
                <li><a href="#"><span class="fa fa-twitter"></span></a></li>
                <li><a href="#"><span class="fa fa-instagram"></span></a></li> -->
              </ul>
            </div>
            <div class="col-md-6 col-sm-6 col-7 text-right">
			 <p class="mb-0">
                <!-- <a href="{% url 'booking' %}" class="cta-btn">Make an Appointment</a> -->
				<a href="{% url 'logout_fn' %}" class="cta-btn">Logout</a></p>            		
				<!-- <a href="#" class="cta-btn" data-toggle="modal" data-target="#modalAppointment">Register/Login</a></p> -->
		
		</div>
          </div>
        </div>
      </div>
      <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container">
          <a class="navbar-brand" href="index.html">Touch Of <span>Care</span> </a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample05" aria-controls="navbarsExample05" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse" id="navbarsExample05">
            <ul class="navbar-nav ml-auto">
              <li class="nav-item">
                <a class="nav-link active" href="{% url 'Patient_homelog' %}">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="{% url 'patient_hm' %}">Edit Profile</a>
              </li>
               <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="dropdown04" data-toggle="dropdown" style="color: #007bff;" aria-haspopup="true" aria-expanded="false">Make a appointment</a>
                <div class="dropdown-menu" aria-labelledby="dropdown04">
                  <a class="nav-link active" href="{% url 'booking' %}">Book Doctor</a>
                  <a class="nav-link active" href="{% url 'lab_bk_pg' %}">Book Lab</a>
                </div>
              </li>
               <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="dropdown04" data-toggle="dropdown" style="color: #007bff;" aria-haspopup="true" aria-expanded="false">Your Bookings</a>
                <div class="dropdown-menu" aria-labelledby="dropdown04">
                  <a class="dropdown-item" href="{% url 'dr_bk_vw' %}">Doctor Appointments</a>
                  <a class="dropdown-item" href="{% url 'lab_bk_vw' %}">Lab Appointments</a>
                </div>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="{% url 'user_feedback' %}">Feedback</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>
    <!-- END header -->
 
    <a class="cta-link element-animate" data-animate-effect="fadeIn" data-toggle="modal" data-target="#modalAppointment">
      <span class="sub-heading">{{user_dtt.name}}</span>
      <span class="heading">Make an Appointment</span>
    </a>
	<br><br>
    <!-- END cta-link -->
		<!-- 		<form action="{% url 'login_check' %}" method="post">{% csrf_token %}
				
				</form> -->

<form action="{% url 'do_booking' %}" style="display: inline-block;" method="post">{% csrf_token %}
			   <div class="row">
                <div class="col-md-6">
              <div class="form-group">

                <label for="appointment_name" class="text-black">Location</label>
				<div class="input">
                <select id="sel_loc" name="loc" class="form-control" required pattern="[A-Z]">
								<option selected disabled>SELECT</option>
								<option value="Alappuzha">Alappuzha</option>
								  <option value="Ernakulam">Ernakulam </option>
								  <option value="Idukki">Idukki</option>
								  <option value="Kannur">Kannur</option>
								  <option value="Kasaragod">Kasaragod</option>
								  <option value="Kollam">Kollam</option>
								  <option value="Kottayam">Kottayam</option>
								  <option value="Kozhikode">Kozhikode </option>
								  <option value="Malappuram">Malappuram</option>
								  <option value="Palakkad">Palakkad</option>
								  <option value="Pathanamthitta">Pathanamthitta</option>   
								  <option value="Thiruvananthapuram">Thiruvananthapuram</option>
								  <option value="Thrissur">Thrissur</option>
								  <option value="Wayanad">Wayanad</option>   
</select>
</div>
              </div>
			  </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <label for="appointment_date" class="text-black">Hospitals</label>
					<div class="input">
<select id="sel_hosp" name="selt_hosp" class="form-control" required pattern="[A-Z]">

					<option selected disabled>SELECT</option>
</select>								
					</div>
					</div>
		</div>
              </div>
			  			  </div>

						
						
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">
                    <label for="appointment_date" class="text-black">Departments</label>
					<div class="input">
<select id="spl" name="departmnt" class="form-control" required pattern="[A-Z]">

					<option selected disabled>SELECT</option>
</select>								
					</div>    
					</div>    
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <label for="appointment_time" class="text-black">Doctors</label>
					<div class="input">
<select id="dr" name="dr" class="form-control" required pattern="[A-Z]">

								<option selected disabled>SELECT</option>
</select>								
								</div>
								</div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">
                    <label for="appointment_date" class="text-black">Date</label>
					<div class="input">
						<input id="datess" data-provide="datepicker" class="form-control" name="appointment_dt" style="background-color:white;" required>
                    <!--<input id="dttte"type="date" class="form-control" name="appointment_dt" style="background-color:white;" required>-->
                  </div>    
                  </div>    
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <label for="appointment_date" class="text-black">Time</label>
					<div class="input">
                <select required id="appointment_tyme" name="appoint_tym" class="form-control" >
								<option selected disabled>SELECT</option>
								<option value="9AM to 10AM">9AM to 10AM</option>
								<option value="10AM to 11AM">10AM to 11AM</option>
								<option value="11AM to 12PM">11AM to 12PM</option>
								<option value="12PM to 1PM">12PM to 1PM</option>
								<option value="2PM to 3PM">2PM to 3PM</option>
								<option value="3PM to 4PM">3PM to 4PM</option>
								<option value="4PM to 5PM">4PM to 5PM</option>
								<option value="5PM to 6PM">5PM to 6PM</option> 
				</select>                  
				</div>
				</div>
                </div>
              </div>
<!--               <div class="form-group">
                <label for="appointment_message" class="text-black">Message</label>
                <textarea name="" id="appointment_message" class="form-control" cols="30" rows="10"></textarea>
              </div> -->
              <div class="form-group">
                <input type="submit" value="Book Now" id="bkinggg" class="btn btn-primary" onclick="return Validate()">
              </div>
            </form>
 
<br>
<br>
<br>
    <footer class="site-footer" role="contentinfo">
      <div class="container">
        <div class="row mb-5 element-animate">
          <div class="col-md-3 mb-5">
            <h3>Online Medicine Shopping</h3>
            <ul class="footer-link list-unstyled">
              <li><a>Find a location</a></li>
              <li><a>Find a Pharmacy</a></li>
              <li><a>Buy Medicine</a></li>
            </ul>
          </div>
          <div class="col-md-3 mb-5">
            <h3>Make a Appointment</h3>
            <ul class="footer-link list-unstyled">
			  <li><a>Choose Your Location</a></li>
              <li><a>Choose Your Hospital</a></li>
              <li><a>Find Your Doctor</a></li>
            </ul>
          </div>
          <div class="col-md-3 mb-5">
            <h3>Book Your Lab Test</h3>
            <ul class="footer-link list-unstyled">
              <li><a>Choose Your Location</a></li>
              <li><a>Choose Your Lab</a></li>
              <li><a>Book Your Lab Test</a></li>

            </ul>
          </div>
        </div>
	        <div class="row pt-md-3 element-animate">
          <div class="col-md-12">
            <hr class="border-t">
          </div>
          <div class="col-md-6 col-sm-12 copyright">
            <p>&copy; 2019 Your Doctor</p>
          </div>
   
        </div>
      </div>
    </footer>
    <!-- END footer -->  



    <script src="{% static 'home/js/jquery-3.2.1.min.js' %}"></script>
    <script src="{% static 'home/js/popper.min.js' %}"></script>
    <script src="{% static 'home/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'home/js/owl.carousel.min.js' %}"></script>
    <script src="{% static 'home/js/bootstrap-datepicker.js' %}"></script>
    <script src="{% static 'home/js/jquery.timepicker.min.js' %}"></script>
    <script src="{% static 'home/js/jquery.waypoints.min.js' %}"></script>
    <script src="{% static 'home/js/main.js' %}"></script>
 	<script>
var date1 = new Date();
date1.setDate(date1.getDate());
$('#datess').datepicker({ 
    startDate: date1
});
</script>
<script>
$(document).ready(function(){

/* $("#bkinggg").click(function(){
alert("clicked");
if($('#sel_loc').val()=='null') {    
  alert('choose some value');
  return false;
}
  });  */

	$("#sel_loc").on('change', function(){
	<!-- alert($('#sel_loc').val()); -->
		$.ajax({	
			url:'/list_hosp/',
			data:{"loc":$('#sel_loc').val()},
		success:function(data){	
<!-- alert("ok"); -->
	$('#sel_hosp').empty()
			$('#sel_hosp').append('<option selected disabled>SELECT</option>')

        	for(var i=0;i<data.dt1.length;i++)
        	{
			<!-- alert(data.dt1[i].fields.hosp_nm); -->
			$('#sel_hosp').append('<option value='+data.dt1[i].pk+'> '+data.dt1[i].fields.hosp_nm+'</option>');
			}
		
			}
		});
	});

	$("#sel_hosp").on('change', function(){
		<!-- alert($('#sel_hosp').val()); -->
		$.ajax({	
			url:'/list_dept/',
			data:{"hosp_id":$('#sel_hosp').val()},
		success:function(data){	
var arr1 = [];
var i = 0;
for (i = 0;i<data.dt1.length; i++){
  arr1.push(data.dt1[i].fields.specialization)
}
/*alert("hi");
alert(arr1.length);
alert("ok");*/
	$('#spl').empty()
			$('#spl').append('<option selected disabled>SELECT</option>')
  var dept = arr1.filter(function(elem, index, self) {
      return index === self.indexOf(elem);
  });
   
  console.log(dept);

   	for(var i=0;i<dept.length;i++)
        	{
			<!-- alert(dept[i]); -->
			$('#spl').append('<option value='+dept[i]+'> '+dept[i]+'</option>');
			} 
		
			}
		});
	});
	$("#spl").on('change', function(){
		<!-- alert($('#spl').val()); -->
		$.ajax({	
			url:'/list_dr/',
			data:{"dept":$('#spl').val(),"hosp_id":$('#sel_hosp').val()},
		success:function(data){	
<!-- alert("ok"); -->
	$('#dr').empty()
			$('#dr').append('<option selected disabled>SELECT</option>')

        	for(var i=0;i<data.dt1.length;i++)
        	{
			<!-- alert(data.dt1[i].pk); -->
			$('#dr').append('<option value='+data.dt1[i].pk+'> '+data.dt1[i].fields.name+'</option>');
			}
		
			}
		});
	});
});
</script>
  </body>
</html>